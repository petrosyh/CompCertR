
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Simulation</title>
<meta name="description" content="Documentation of Coq module Simulation" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Simulation</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id">Smallstep</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Values</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Globalenvs</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Memory</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Integers</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Events</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">AST</span>.<br/>
<span class="id">From</span> <span class="id">Paco</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">paco</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">sflib</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">CoqlibC</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Axioms</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Relations</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Wellfounded</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Program.Equality</span>.<br/>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="id">Arguments</span>.<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">well_founded_clos_trans</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">index</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">WF</span>: <span class="id">well_founded</span> <span class="id">order</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">WF</span>: <span class="id">well_founded</span> (<span class="id">clos_trans</span> <span class="id">index</span> <span class="id">order</span>)&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6667')">Proof.</div>
<div class="proofscript" id="proof6667">
&nbsp;&nbsp;<span class="id">hnf</span> <span class="kwd">in</span> <span class="id">WF</span>. <span class="id">hnf</span>. <span class="id">i</span>. <span class="tactic">eapply</span> <span class="id">Acc_clos_trans</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">clos_t_rt</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span> : <span class="kwd">Type</span>) (<span class="id">R</span> : <span class="id">relation</span> <span class="id">A</span>) (<span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : <span class="id">A</span>),<br/>
&nbsp;&nbsp;<span class="id">clos_trans</span> <span class="id">A</span> <span class="id">R</span> <span class="id">x</span> <span class="id">y</span> -&gt; <span class="id">clos_refl_trans</span> <span class="id">A</span> <span class="id">R</span> <span class="id">y</span> <span class="id">z</span> -&gt; <span class="id">clos_trans</span> <span class="id">A</span> <span class="id">R</span> <span class="id">x</span> <span class="id">z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6668')">Proof.</div>
<div class="proofscript" id="proof6668">
&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">induction</span> <span class="id">H0</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">t_trans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHclos_refl_trans2</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Module</span> <span class="id">NOSTUTTER</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">BACKWARD_SIM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Variables</span> <span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id">index</span>: <span class="kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">_bsim</span> <span class="id">bsim</span> (<span class="id">i0</span>: <span class="id">index</span>) (<span class="id">st_src0</span>: <span class="id">state</span> <span class="id">L1</span>) (<span class="id">st_tgt0</span>: <span class="id">state</span> <span class="id">L2</span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">bsim_intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="kwd">forall</span> <span class="id">retv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINALTGT</span>: <span class="id">final_state</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">retv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAFESRC</span>: <span class="id">safe</span> <span class="id">L1</span> <span class="id">st_src0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">st_src1</span>, &lt;&lt;<span class="id">STEPSRC</span>: <span class="id">Star</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">E0</span> <span class="id">st_src1</span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FINALSRC</span>: <span class="id">final_state</span> <span class="id">L1</span> <span class="id">st_src1</span> <span class="id">retv</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="kwd">forall</span> <span class="id">st_tgt1</span> <span class="id">tr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEPTGT</span>: <span class="id">Step</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">tr</span> <span class="id">st_tgt1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAFESRC</span>: <span class="id">safe</span> <span class="id">L1</span> <span class="id">st_src0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i1</span> <span class="id">st_src1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">PLUS</span>: <span class="id">Plus</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">tr</span> <span class="id">st_src1</span>&gt;&gt; \/ &lt;&lt;<span class="id">STAR</span>: <span class="id">Star</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">tr</span> <span class="id">st_src1</span> /\ <span class="id">order</span> <span class="id">i1</span> <span class="id">i0</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ &lt;&lt;<span class="id">BSIM</span>: <span class="id">bsim</span> <span class="id">i1</span> <span class="id">st_src1</span> <span class="id">st_tgt1</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PROGRESS</span>: <span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAFESRC</span>: <span class="id">safe</span> <span class="id">L1</span> <span class="id">st_src0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FINAL</span>: <span class="id">exists</span> <span class="id">retv</span>, <span class="id">final_state</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">retv</span>&gt;&gt; \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">STEP</span>: <span class="id">exists</span> <span class="id">tr</span> <span class="id">st_tgt1</span>, <span class="id">Step</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">tr</span> <span class="id">st_tgt1</span>&gt;&gt;).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">bsim</span>: <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span> := <span class="id">paco3</span> <span class="id">_bsim</span> <span class="id">bot3</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">bsim_mon</span>: <span class="id">monotone3</span> <span class="id">_bsim</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6669')">Proof.</div>
<div class="proofscript" id="proof6669">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">IN</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">BACKWARD_SIM</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id">bsim</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">bsim_mon</span>: <span class="id">paco</span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id">bsim_properties</span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>) (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>): <span class="kwd">Prop</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bsim_order_wf</span>: &lt;&lt;<span class="id">WF</span>: <span class="id">well_founded</span> <span class="id">order</span>&gt;&gt;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bsim_initial_states_exist</span>: <span class="kwd">forall</span> <span class="id">st_init_src</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">st_init_tgt</span>, &lt;&lt;<span class="id">INITTGT</span>: <span class="id">initial_state</span> <span class="id">L2</span> <span class="id">st_init_tgt</span>&gt;&gt;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bsim_match_initial_states</span>: <span class="kwd">forall</span> <span class="id">st_init_src_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">st_init_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITTGT</span>: <span class="id">initial_state</span> <span class="id">L2</span> <span class="id">st_init_tgt</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i0</span> <span class="id">st_init_src</span>, &lt;&lt;<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src</span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">BSIM</span>: <span class="id">bsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span> <span class="id">i0</span> <span class="id">st_init_src</span> <span class="id">st_init_tgt</span>&gt;&gt;;<br/>
}.<br/>
<br/>
<span class="id">Arguments</span> <span class="id">bsim_properties</span>: <span class="tactic">clear</span> <span class="id">implicits</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">backward_simulation</span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">Backward_simulation</span> (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">props</span>: <span class="id">bsim_properties</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span> <span class="id">order</span>).<br/>
<br/>
<span class="id">Arguments</span> <span class="id">Backward_simulation</span> {<span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span>} <span class="id">order</span> <span class="id">props</span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">to_compcert_backward_simulation</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L1</span> <span class="id">L2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BSIM</span>: <span class="id">backward_simulation</span> <span class="id">L1</span> <span class="id">L2</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">BSIM</span>: <span class="id">Smallstep.backward_simulation</span> <span class="id">L1</span> <span class="id">L2</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6670')">Proof.</div>
<div class="proofscript" id="proof6670">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">inv</span> <span class="id">props</span>.<br/>
&nbsp;&nbsp;<span class="id">econs</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">exploit</span> <span class="id">bsim_initial_states_exist0</span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id">bsim_match_initial_states0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">punfold</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id">FINAL</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;progress&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">BSIM</span>. <span class="tactic">rename</span> <span class="id">H0</span> <span class="id">into</span> <span class="id">SAFE</span>. <span class="id">punfold</span> <span class="id">BSIM</span>. <span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">exploit</span> <span class="id">PROGRESS</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">STEP</span>. <span class="tactic">rename</span> <span class="id">H0</span> <span class="id">into</span> <span class="id">BSIM</span>. <span class="tactic">rename</span> <span class="id">H1</span> <span class="id">into</span> <span class="id">SAFE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">punfold</span> <span class="id">BSIM</span>. <span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">pclearbot</span>. <span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">NOSTUTTER</span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id">BACKWARD_SIM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Variables</span> <span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id">index</span>: <span class="kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">bsim_step</span> <span class="id">bsim</span> (<span class="id">i0</span>: <span class="id">index</span>) (<span class="id">st_src0</span>: <span class="id">L1</span>.(<span class="id">state</span>)) (<span class="id">st_tgt0</span>: <span class="id">L2</span>.(<span class="id">state</span>)): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">bsim_step_step</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="kwd">forall</span> <span class="id">st_tgt1</span> <span class="id">tr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEPTGT</span>: <span class="id">Step</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">tr</span> <span class="id">st_tgt1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i1</span> <span class="id">st_src1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">PLUS</span>: <span class="id">Plus</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">tr</span> <span class="id">st_src1</span>&gt;&gt; \/ &lt;&lt;<span class="id">STAR</span>: <span class="id">Star</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">tr</span> <span class="id">st_src1</span> /\ <span class="id">order</span> <span class="id">i1</span> <span class="id">i0</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ &lt;&lt;<span class="id">BSIM</span>: <span class="id">bsim</span> <span class="id">i1</span> <span class="id">st_src1</span> <span class="id">st_tgt1</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PROGRESS</span>: <span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAFESRC</span>: <span class="id">safe</span> <span class="id">L1</span> <span class="id">st_src0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FINAL</span>: <span class="id">exists</span> <span class="id">retv</span>, <span class="id">final_state</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">retv</span>&gt;&gt; \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">STEP</span>: <span class="id">exists</span> <span class="id">tr</span> <span class="id">st_tgt1</span>, <span class="id">Step</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">tr</span> <span class="id">st_tgt1</span>&gt;&gt;)<br/>
&nbsp;&nbsp;| <span class="id">bsim_step_stutter</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i1</span> <span class="id">st_src1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STAR</span>: <span class="id">Star</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">nil</span> <span class="id">st_src1</span> /\ <span class="id">order</span> <span class="id">i1</span> <span class="id">i0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BSIM</span>: <span class="id">bsim</span> <span class="id">i1</span> <span class="id">st_src1</span> <span class="id">st_tgt0</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">_bsim</span> <span class="id">bsim</span> (<span class="id">i0</span>: <span class="id">index</span>) (<span class="id">st_src0</span>: <span class="id">state</span> <span class="id">L1</span>) (<span class="id">st_tgt0</span>: <span class="id">state</span> <span class="id">L2</span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">bsim_intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="kwd">forall</span> <span class="id">retv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINALTGT</span>: <span class="id">final_state</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">retv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAFESRC</span>: <span class="id">safe</span> <span class="id">L1</span> <span class="id">st_src0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">st_src1</span>, &lt;&lt;<span class="id">STEPSRC</span>: <span class="id">Star</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">E0</span> <span class="id">st_src1</span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FINALSRC</span>: <span class="id">final_state</span> <span class="id">L1</span> <span class="id">st_src1</span> <span class="id">retv</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAFESRC</span>: <span class="id">safe</span> <span class="id">L1</span> <span class="id">st_src0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">STEP</span>: <span class="id">bsim_step</span> <span class="id">bsim</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>&gt;&gt;).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">bsim</span>: <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span> := <span class="id">paco3</span> <span class="id">_bsim</span> <span class="id">bot3</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">bsim_mon</span>: <span class="id">monotone3</span> <span class="id">_bsim</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6671')">Proof.</div>
<div class="proofscript" id="proof6671">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">IN</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eleft</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eright</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">BACKWARD_SIM</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id">bsim</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">bsim_mon</span>: <span class="id">paco</span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id">bsim_properties</span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>) (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>): <span class="kwd">Prop</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bsim_order_wf</span>: &lt;&lt;<span class="id">WF</span>: <span class="id">well_founded</span> <span class="id">order</span>&gt;&gt;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bsim_initial_states_exist</span>: <span class="kwd">forall</span> <span class="id">st_init_src</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">st_init_tgt</span>, &lt;&lt;<span class="id">INITTGT</span>: <span class="id">initial_state</span> <span class="id">L2</span> <span class="id">st_init_tgt</span>&gt;&gt;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bsim_match_initial_states</span>: <span class="kwd">forall</span> <span class="id">st_init_src_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">st_init_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITTGT</span>: <span class="id">initial_state</span> <span class="id">L2</span> <span class="id">st_init_tgt</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i0</span> <span class="id">st_init_src</span>, &lt;&lt;<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src</span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">BSIM</span>: <span class="id">bsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span> <span class="id">i0</span> <span class="id">st_init_src</span> <span class="id">st_init_tgt</span>&gt;&gt;;<br/>
}.<br/>
<br/>
<span class="id">Arguments</span> <span class="id">bsim_properties</span>: <span class="tactic">clear</span> <span class="id">implicits</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">backward_simulation</span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">Backward_simulation</span> (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">props</span>: <span class="id">bsim_properties</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span> <span class="id">order</span>).<br/>
<br/>
<span class="id">Arguments</span> <span class="id">Backward_simulation</span> {<span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span>} <span class="id">order</span> <span class="id">props</span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bsim_to_nostutter_bsim</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">index</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ord</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">WF</span>: <span class="id">well_founded</span> <span class="id">ord</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BSIM</span>: <span class="id">bsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">ord</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">BSIM</span>: <span class="id">NOSTUTTER.bsim</span> <span class="id">L1</span> <span class="id">L2</span> (<span class="id">clos_trans</span> <span class="id">_</span> <span class="id">ord</span>) <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6672')">Proof.</div>
<div class="proofscript" id="proof6672">
&nbsp;&nbsp;<span class="tactic">red</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">i0</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_src0</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_tgt0</span>.<br/>
&nbsp;&nbsp;<span class="id">pcofix</span> <span class="id">CIH</span>. <span class="id">i</span>. <span class="id">pfold</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">punfold</span> <span class="id">BSIM</span>. <span class="id">inv</span> <span class="id">BSIM</span>. <span class="tactic">eapply</span> <span class="id">FINAL</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_src0</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_tgt0</span>. <span class="tactic">pattern</span> <span class="id">i0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id">well_founded_ind</span> <span class="id">WF</span>); <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">punfold</span> <span class="id">BSIM</span>. <span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">pclearbot</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">left</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">right</span>; <span class="id">ss</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">pclearbot</span>. <span class="id">des</span>. <span class="id">specialize</span> (<span class="id">IH</span> <span class="id">_</span> <span class="id">STAR0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IH</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">SAFESRC</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">star_plus_trans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">right</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">clos_trans_tn1_iff</span>. <span class="id">econs</span> 2; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">clos_trans_tn1_iff</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">BSIM</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_src0</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_tgt0</span>. <span class="tactic">pattern</span> <span class="id">i0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id">well_founded_ind</span> <span class="id">WF</span>); <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">IH</span>. <span class="tactic">clear</span> <span class="id">i0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">punfold</span> <span class="id">BSIM</span>. <span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">specialize</span> (<span class="id">STEP</span> <span class="id">SAFESRC</span>). <span class="id">inv</span> <span class="id">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">PROGRESS</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">des</span>. <span class="id">pclearbot</span>. <span class="id">exploit</span> <span class="id">IH</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">star_safe</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">backward_to_nostutter_backward_simulation</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L1</span> <span class="id">L2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BS</span>: <span class="id">backward_simulation</span> <span class="id">L1</span> <span class="id">L2</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">BS</span>: <span class="id">NOSTUTTER.backward_simulation</span> <span class="id">L1</span> <span class="id">L2</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6673')">Proof.</div>
<div class="proofscript" id="proof6673">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">BS</span>. <span class="id">inv</span> <span class="id">props</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1:= (<span class="id">clos_trans</span> <span class="id">_</span> <span class="id">order</span>)). <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">well_founded_clos_trans</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">i</span>. <span class="id">exploit</span> <span class="id">bsim_match_initial_states0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">bsim_to_nostutter_bsim</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">backward_to_compcert_backward_simulation</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L1</span> <span class="id">L2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BSIM</span>: <span class="id">backward_simulation</span> <span class="id">L1</span> <span class="id">L2</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">BSIM</span>: <span class="id">Smallstep.backward_simulation</span> <span class="id">L1</span> <span class="id">L2</span>&gt;&gt;<br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6674')">Proof.</div>
<div class="proofscript" id="proof6674">
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">NOSTUTTER.to_compcert_backward_simulation</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">backward_to_nostutter_backward_simulation</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">single_events_at</span> (<span class="id">L</span>: <span class="id">semantics</span>) (<span class="id">s</span>:<span class="id">L</span>.(<span class="id">state</span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">s</span>', <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t</span> <span class="id">s</span>' -&gt; (<span class="id">length</span> <span class="id">t</span> &lt;= 1)%<span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id">strict_determinate_at</span> (<span class="id">L</span>: <span class="id">semantics</span>) (<span class="id">s</span>:<span class="id">L</span>.(<span class="id">state</span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">Strict_determinate_at</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ssd_determ_at</span>: <span class="kwd">forall</span> <span class="id">t1</span> <span class="id">s1</span> <span class="id">t2</span> <span class="id">s2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP0</span>: <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">s1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP1</span> :<span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">s2</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">EQ</span>: <span class="id">t1</span> = <span class="id">t2</span>&gt;&gt; /\ &lt;&lt;<span class="id">EQ</span>: <span class="id">s1</span> = <span class="id">s2</span>&gt;&gt;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ssd_determ_at_final</span>: <span class="kwd">forall</span> <span class="id">tr</span> <span class="id">s</span>' <span class="id">retv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="id">final_state</span> <span class="id">L</span> <span class="id">s</span> <span class="id">retv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">tr</span> <span class="id">s</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">False</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ssd_traces_at</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">single_events_at</span> <span class="id">L</span> <span class="id">s</span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">SDStep</span> (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span> =&gt; <span class="id">strict_determinate_at</span> <span class="id">L</span> <span class="id">s1</span> /\ <span class="id">Step</span> <span class="id">L</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">SDStar</span> (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">star</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">SDStep</span> <span class="id">L</span>)) <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">L</span>.(<span class="id">globalenv</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">SDStarN</span> (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">starN</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">SDStep</span> <span class="id">L</span>)) <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">L</span>.(<span class="id">globalenv</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">SDPlus</span> (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">plus</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">SDStep</span> <span class="id">L</span>)) <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">L</span>.(<span class="id">globalenv</span>).<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id">SDStep</span> <span class="id">SDStar</span> <span class="id">SDStarN</span> <span class="id">SDPlus</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">Dfinal_state</span> (<span class="id">L</span>: <span class="id">semantics</span>) (<span class="id">st</span>: <span class="id">L</span>.(<span class="id">state</span>)) (<span class="id">retv</span>: <span class="id">int</span>): <span class="kwd">Prop</span> :=<br/>
| <span class="id">Dfinal_state_intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="id">final_state</span> <span class="id">L</span> <span class="id">st</span> <span class="id">retv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DTM</span>: <span class="kwd">forall</span> <span class="id">retv0</span> <span class="id">retv1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL0</span>: <span class="id">final_state</span> <span class="id">L</span> <span class="id">st</span> <span class="id">retv0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL1</span>: <span class="id">final_state</span> <span class="id">L</span> <span class="id">st</span> <span class="id">retv1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">retv0</span> = <span class="id">retv1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DTM</span>: <span class="kwd">forall</span> <span class="id">retv0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="id">final_state</span> <span class="id">L</span> <span class="id">st</span> <span class="id">retv0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Nostep</span> <span class="id">L</span> <span class="id">st</span>).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">Dinitial_state</span> (<span class="id">L</span>: <span class="id">semantics</span>) (<span class="id">st</span>: <span class="id">L</span>.(<span class="id">state</span>)): <span class="kwd">Prop</span> :=<br/>
| <span class="id">Dinitial_state_intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INIT</span>: <span class="id">initial_state</span> <span class="id">L</span> <span class="id">st</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DTM</span>: <span class="kwd">forall</span> <span class="id">st0</span> <span class="id">st1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INIT0</span>: <span class="id">initial_state</span> <span class="id">L</span> <span class="id">st0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INIT1</span>: <span class="id">initial_state</span> <span class="id">L</span> <span class="id">st1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">st0</span> = <span class="id">st1</span>).<br/>
<br/>
<br/>
<br/>
<span class="kwd">Module</span> <span class="id">GENMT</span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id">match_traces</span>: <span class="kwd">Type</span> := {<br/>
&nbsp;&nbsp;<span class="id">mt_match</span> :&gt; <span class="id">trace</span> -&gt; <span class="id">trace</span> -&gt; <span class="kwd">Prop</span>;<br/>
&nbsp;&nbsp;<span class="id">mt_nil_left</span>: <span class="kwd">forall</span> <span class="id">x</span> (<span class="id">NIL</span>: <span class="id">mt_match</span> <span class="id">E0</span> <span class="id">x</span>), <span class="id">x</span> = <span class="id">E0</span>;<br/>
&nbsp;&nbsp;<span class="id">mt_nil_right</span>: <span class="kwd">forall</span> <span class="id">x</span> (<span class="id">NIL</span>: <span class="id">mt_match</span> <span class="id">x</span> <span class="id">E0</span>), <span class="id">x</span> = <span class="id">E0</span>;<br/>
}.<br/>
<br/>
<span class="kwd">Record</span> <span class="id">receptive_at</span> (<span class="id">mt</span>: <span class="id">match_traces</span>) (<span class="id">L</span>: <span class="id">semantics</span>) (<span class="id">s</span>:<span class="id">L</span>.(<span class="id">state</span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">Receptive_at</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sr_receptive_at</span>: <span class="kwd">forall</span> <span class="id">t1</span> <span class="id">s1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">s1</span> -&gt; <span class="id">mt</span> <span class="id">t1</span> <span class="id">t2</span> -&gt; <span class="id">exists</span> <span class="id">s2</span>, <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">s2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sr_traces_at</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">single_events_at</span> <span class="id">L</span> <span class="id">s</span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Record</span> <span class="id">determinate_at</span> (<span class="id">mt</span>: <span class="id">match_traces</span>) (<span class="id">L</span>: <span class="id">semantics</span>) (<span class="id">s</span>:<span class="id">L</span>.(<span class="id">state</span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">Determinate_at</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sd_determ_at</span>: <span class="kwd">forall</span> <span class="id">t1</span> <span class="id">s1</span> <span class="id">t2</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">s1</span> -&gt; <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mt</span> <span class="id">t1</span> <span class="id">t2</span> /\ (<span class="id">t1</span> = <span class="id">t2</span> -&gt; <span class="id">s1</span> = <span class="id">s2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sd_determ_at_final</span>: <span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr</span> <span class="id">s</span>' <span class="id">retv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="id">final_state</span> <span class="id">L</span> <span class="id">s</span> <span class="id">retv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">tr</span> <span class="id">s</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">False</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sd_traces_at</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">single_events_at</span> <span class="id">L</span> <span class="id">s</span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id">match_traces_default</span> (<span class="id">se</span>: <span class="id">Senv.t</span>): <span class="id">match_traces</span> :=<br/>
&nbsp;&nbsp;<span class="id">Build_match_traces</span> (<span class="id">Events.match_traces</span> <span class="id">se</span>) <span class="id">_</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6675')">Next Obligation.</div>
<div class="proofscript" id="proof6675">
 <span class="id">inv</span> <span class="id">NIL</span>. <span class="id">ss</span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6676')">Next Obligation.</div>
<div class="proofscript" id="proof6676">
 <span class="id">inv</span> <span class="id">NIL</span>. <span class="id">ss</span>. Qed.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id">match_traces_strict</span>: <span class="id">match_traces</span> :=<br/>
&nbsp;&nbsp;<span class="id">Build_match_traces</span> <span class="id">eq</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">no_event_receptive</span> <span class="id">L</span> <span class="id">s</span> <span class="id">mt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DETERM</span>: <span class="kwd">forall</span> <span class="id">t1</span> <span class="id">s1</span>, <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">s1</span> -&gt; <span class="id">t1</span> = <span class="id">E0</span>):<br/>
&nbsp;&nbsp;<span class="id">receptive_at</span> <span class="id">mt</span> <span class="id">L</span> <span class="id">s</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6677')">Proof.</div>
<div class="proofscript" id="proof6677">
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id">DETERM</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mt_nil_left</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">clarify</span>. <span class="id">exists</span> <span class="id">s1</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">repeat</span> <span class="tactic">intro</span>. <span class="id">exploit</span> <span class="id">DETERM</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">DStep</span> (<span class="id">mt</span>: <span class="id">match_traces</span>) (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span> =&gt; <span class="id">determinate_at</span> <span class="id">mt</span> <span class="id">L</span> <span class="id">s1</span> /\ <span class="id">Step</span> <span class="id">L</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">DStar</span> (<span class="id">mt</span>: <span class="id">match_traces</span>) (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">star</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">DStep</span> <span class="id">mt</span> <span class="id">L</span>)) <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">L</span>.(<span class="id">globalenv</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">DStarN</span> (<span class="id">mt</span>: <span class="id">match_traces</span>) (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">starN</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">DStep</span> <span class="id">mt</span> <span class="id">L</span>)) <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">L</span>.(<span class="id">globalenv</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">DPlus</span> (<span class="id">mt</span>: <span class="id">match_traces</span>) (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">plus</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">DStep</span> <span class="id">mt</span> <span class="id">L</span>)) <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">L</span>.(<span class="id">globalenv</span>).<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id">DStep</span> <span class="id">DStar</span> <span class="id">DStarN</span> <span class="id">DPlus</span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id">strict_fsim_src</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">SRC</span>: <span class="kwd">forall</span> <span class="id">L</span> <span class="id">st0</span>, <span class="id">single_events_at</span> <span class="id">L</span> <span class="id">st0</span> &lt;-&gt; <span class="id">receptive_at</span> <span class="id">match_traces_strict</span> <span class="id">L</span> <span class="id">st0</span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6678')">Proof.</div>
<div class="proofscript" id="proof6678">
&nbsp;&nbsp;- <span class="tactic">split</span>; <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="id">ss</span>. <span class="id">clarify</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>. <span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">strict_fsim_tgt</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">TGT</span>: <span class="kwd">forall</span> <span class="id">L</span> <span class="id">st0</span>, <span class="id">strict_determinate_at</span> <span class="id">L</span> <span class="id">st0</span> &lt;-&gt; <span class="id">determinate_at</span> <span class="id">match_traces_strict</span> <span class="id">L</span> <span class="id">st0</span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6679')">Proof.</div>
<div class="proofscript" id="proof6679">
&nbsp;&nbsp;- <span class="tactic">split</span>; <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">ssd_determ_at0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">H</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">H0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">sd_determ_at0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">STEP0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">STEP1</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">strict_fsim_tgt_step</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">TGT</span>: <span class="kwd">forall</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span>, <span class="id">SDStep</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span> &lt;-&gt; <span class="id">DStep</span> <span class="id">match_traces_strict</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6680')">Proof.</div>
<div class="proofscript" id="proof6680">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">DStep</span>. <span class="tactic">unfold</span> <span class="id">SDStep</span>. <span class="tactic">split</span>; <span class="id">i</span>; <span class="id">des</span>; <span class="id">econs</span>; <span class="tactic">eauto</span>; <span class="tactic">apply</span> <span class="id">strict_fsim_tgt</span>; <span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">strict_fsim_tgt_star</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">TGT</span>: <span class="kwd">forall</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span>, <span class="id">SDStar</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span> &lt;-&gt; <span class="id">DStar</span> <span class="id">match_traces_strict</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6681')">Proof.</div>
<div class="proofscript" id="proof6681">
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">i</span>; <span class="tactic">induction</span> <span class="id">H</span>; <span class="id">ii</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">star_refl</span>; <span class="id">econs</span>; <span class="tactic">eauto</span>; <span class="tactic">apply</span> <span class="id">strict_fsim_tgt_step</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">strict_fsim_tgt_plus</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">TGT</span>: <span class="kwd">forall</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span>, <span class="id">SDPlus</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span> &lt;-&gt; <span class="id">DPlus</span> <span class="id">match_traces_strict</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6682')">Proof.</div>
<div class="proofscript" id="proof6682">
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">i</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">econs</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">strict_fsim_tgt_star</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">strict_fsim_tgt_step</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">DStep_E0_SDStep</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L</span> <span class="id">st0</span> <span class="id">st1</span> <span class="id">mt_at</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="id">DStep</span> <span class="id">mt_at</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">E0</span> <span class="id">st1</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SDStep</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">E0</span> <span class="id">st1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6683')">Proof.</div>
<div class="proofscript" id="proof6683">
&nbsp;&nbsp;<span class="id">r</span> <span class="kwd">in</span> <span class="id">STEP</span>. <span class="id">des</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">STEP</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">sd_determ_at0</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">STEP0</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">STEP1</span>. }<br/>
&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="tactic">apply</span> <span class="id">mt_nil_left</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">clarify</span>. <span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">sd_determ_at0</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">STEP0</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">STEP2</span>. }<br/>
&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="tactic">apply</span> <span class="id">mt_nil_left</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">clarify</span>. <span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">DStarN_E0_SDStarN</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L</span> <span class="id">st0</span> <span class="id">st1</span> <span class="id">mt_at</span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="id">DStarN</span> <span class="id">mt_at</span> <span class="id">L</span> <span class="id">n</span> <span class="id">st0</span> <span class="id">E0</span> <span class="id">st1</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SDStarN</span> <span class="id">L</span> <span class="id">n</span> <span class="id">st0</span> <span class="id">E0</span> <span class="id">st1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6684')">Proof.</div>
<div class="proofscript" id="proof6684">
&nbsp;&nbsp;<span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">STEP</span>; <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;{ <span class="id">econs</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>, <span class="id">t2</span>; <span class="id">ss</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">DStep_E0_SDStep</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">IHSTEP</span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">MIXED_SIM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Variables</span> <span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id">index</span>: <span class="kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">fsim_step</span> <span class="id">xsim</span> (<span class="id">i0</span>: <span class="id">index</span>) (<span class="id">st_src0</span>: <span class="id">L1</span>.(<span class="id">state</span>)) (<span class="id">st_tgt0</span>: <span class="id">L2</span>.(<span class="id">state</span>)): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">fsim_step_step</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mt</span>: <span class="id">match_traces</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="kwd">forall</span> <span class="id">st_src1</span> <span class="id">tr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEPSRC</span>: <span class="id">Step</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">tr</span> <span class="id">st_src1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i1</span> <span class="id">st_tgt1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((&lt;&lt;<span class="id">PLUS</span>: <span class="id">DPlus</span> <span class="id">mt</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">tr</span> <span class="id">st_tgt1</span> /\ (&lt;&lt;<span class="id">RECEPTIVE</span>: <span class="id">receptive_at</span> <span class="id">mt</span> <span class="id">L1</span> <span class="id">st_src0</span>&gt;&gt;)&gt;&gt;) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">STUTTER</span>: <span class="id">st_tgt0</span> = <span class="id">st_tgt1</span> /\ <span class="id">tr</span> = <span class="id">E0</span> /\ <span class="id">order</span> <span class="id">i1</span> <span class="id">i0</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ &lt;&lt;<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">i1</span> <span class="id">st_src1</span> <span class="id">st_tgt1</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="kwd">forall</span> <span class="id">retv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINALSRC</span>: <span class="id">final_state</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">retv</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FINALTGT</span>: <span class="id">Dfinal_state</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">retv</span>&gt;&gt;)<br/>
&nbsp;&nbsp;| <span class="id">fsim_step_stutter</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i1</span> <span class="id">st_tgt1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PLUS</span>: <span class="id">SDPlus</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">nil</span> <span class="id">st_tgt1</span> /\ <span class="id">order</span> <span class="id">i1</span> <span class="id">i0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">i1</span> <span class="id">st_src0</span> <span class="id">st_tgt1</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">_xsim_forward</span> <span class="id">xsim</span> (<span class="id">i0</span>: <span class="id">index</span>) (<span class="id">st_src0</span>: <span class="id">state</span> <span class="id">L1</span>) (<span class="id">st_tgt0</span>: <span class="id">state</span> <span class="id">L2</span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">_xsim_forward_intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="id">fsim_step</span> <span class="id">xsim</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id">bsim_step</span> := <span class="id">bsim_step</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">_xsim_backward</span> <span class="id">xsim</span> (<span class="id">i0</span>: <span class="id">index</span>) (<span class="id">st_src0</span>: <span class="id">state</span> <span class="id">L1</span>) (<span class="id">st_tgt0</span>: <span class="id">state</span> <span class="id">L2</span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">_xsim_backward_intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="kwd">forall</span> <span class="id">retv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINALTGT</span>: <span class="id">final_state</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">retv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAFESRC</span>: <span class="id">safe</span> <span class="id">L1</span> <span class="id">st_src0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">st_src1</span>, &lt;&lt;<span class="id">STEPSRC</span>: <span class="id">Star</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">E0</span> <span class="id">st_src1</span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FINALSRC</span>: <span class="id">final_state</span> <span class="id">L1</span> <span class="id">st_src1</span> <span class="id">retv</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAFESRC</span>: <span class="id">safe</span> <span class="id">L1</span> <span class="id">st_src0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">STEP</span>: <span class="id">bsim_step</span> <span class="id">xsim</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>&gt;&gt;).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">xsim</span>: <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span> := <span class="id">paco3</span> (<span class="id">_xsim_forward</span> \4/ <span class="id">_xsim_backward</span>) <span class="id">bot3</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">_xsim_forward_mon</span>: <span class="id">monotone3</span> (<span class="id">_xsim_forward</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6685')">Proof.</div>
<div class="proofscript" id="proof6685">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">IN</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span> 2; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">_xsim_backward_mon</span>: <span class="id">monotone3</span> (<span class="id">_xsim_backward</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6686')">Proof.</div>
<div class="proofscript" id="proof6686">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">IN</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eleft</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eright</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">xsim_mon</span>: <span class="id">monotone3</span> (<span class="id">_xsim_forward</span> \4/ <span class="id">_xsim_backward</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6687')">Proof.</div>
<div class="proofscript" id="proof6687">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">IN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">_xsim_forward_mon</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span> 2; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">_xsim_backward_mon</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">MIXED_SIM</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id">xsim</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">xsim_mon</span>: <span class="id">paco</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">_xsim_forward_mon</span>: <span class="id">paco</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">_xsim_backward_mon</span>: <span class="id">paco</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">xsim_init_sim</span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>) (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>): <span class="kwd">Prop</span> :=<br/>
| <span class="id">xsim_init_forward</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSIM</span>: <span class="kwd">forall</span> <span class="id">st_init_src</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i0</span> <span class="id">st_init_tgt</span>, &lt;&lt;<span class="id">INITTGT</span>: <span class="id">Dinitial_state</span> <span class="id">L2</span> <span class="id">st_init_tgt</span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span> <span class="id">i0</span> <span class="id">st_init_src</span> <span class="id">st_init_tgt</span>&gt;&gt;)<br/>
| <span class="id">xsim_init_backward</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITEXISTS</span>: <span class="kwd">forall</span> <span class="id">st_init_src</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">st_init_tgt</span>, &lt;&lt;<span class="id">INITTGT</span>: <span class="id">initial_state</span> <span class="id">L2</span> <span class="id">st_init_tgt</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSIM</span>: <span class="kwd">forall</span> <span class="id">st_init_src_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">st_init_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITTGT</span>: <span class="id">initial_state</span> <span class="id">L2</span> <span class="id">st_init_tgt</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i0</span> <span class="id">st_init_src</span>, &lt;&lt;<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src</span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span> <span class="id">i0</span> <span class="id">st_init_src</span> <span class="id">st_init_tgt</span>&gt;&gt;).<br/>
<br/>
<span class="kwd">Record</span> <span class="id">xsim_properties</span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>) (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>): <span class="kwd">Prop</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xsim_order_wf</span>: &lt;&lt;<span class="id">WF</span>: <span class="id">well_founded</span> <span class="id">order</span>&gt;&gt;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xsim_initial_states_sim</span>: &lt;&lt;<span class="id">INIT</span>: <span class="id">xsim_init_sim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span>&gt;&gt;;<br/>
}.<br/>
<br/>
<span class="id">Arguments</span> <span class="id">xsim_properties</span>: <span class="tactic">clear</span> <span class="id">implicits</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">mixed_simulation</span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">Mixed_simulation</span> (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">props</span>: <span class="id">xsim_properties</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span> <span class="id">order</span>).<br/>
<br/>
<span class="id">Arguments</span> <span class="id">Mixed_simulation</span> {<span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span>} <span class="id">order</span> <span class="id">props</span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id">MIXED_TO_BACKWARD</span>.<br/>
<br/>
<span class="kwd">Variables</span> <span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>.<br/>
<span class="kwd">Variable</span> <span class="id">index</span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id">MIXED_SIM</span>: <span class="id">xsim_properties</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span> <span class="id">order</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">match_states</span> := <span class="id">xsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span>.<br/>
<br/>
<div class="doc">Orders </div>
<br/>
<span class="kwd">Inductive</span> <span class="id">x2b_index</span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id">X2BI_before</span> (<span class="id">n</span>: <span class="id">nat</span>)<br/>
&nbsp;&nbsp;| <span class="id">X2BI_after</span> (<span class="id">n</span>: <span class="id">nat</span>) (<span class="id">i</span>: <span class="id">index</span>).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">x2b_order</span>: <span class="id">x2b_index</span> -&gt; <span class="id">x2b_index</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">x2b_order_before</span>: <span class="kwd">forall</span> <span class="id">n</span> <span class="id">n</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">n</span>' &lt; <span class="id">n</span>)%<span class="id">nat</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x2b_order</span> (<span class="id">X2BI_before</span> <span class="id">n</span>') (<span class="id">X2BI_before</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id">x2b_order_after</span>: <span class="kwd">forall</span> <span class="id">n</span> <span class="id">n</span>' <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">n</span>' &lt; <span class="id">n</span>)%<span class="id">nat</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x2b_order</span> (<span class="id">X2BI_after</span> <span class="id">n</span>' <span class="id">i</span>) (<span class="id">X2BI_after</span> <span class="id">n</span> <span class="id">i</span>)<br/>
&nbsp;&nbsp;| <span class="id">x2b_order_after</span>': <span class="kwd">forall</span> <span class="id">n</span> <span class="id">m</span> <span class="id">i</span>' <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clos_trans</span> <span class="id">_</span> <span class="id">order</span> <span class="id">i</span>' <span class="id">i</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x2b_order</span> (<span class="id">X2BI_after</span> <span class="id">m</span> <span class="id">i</span>') (<span class="id">X2BI_after</span> <span class="id">n</span> <span class="id">i</span>)<br/>
&nbsp;&nbsp;| <span class="id">x2b_order_switch</span>: <span class="kwd">forall</span> <span class="id">n</span> <span class="id">n</span>' <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x2b_order</span> (<span class="id">X2BI_before</span> <span class="id">n</span>') (<span class="id">X2BI_after</span> <span class="id">n</span> <span class="id">i</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">wf_x2b_order</span>:<br/>
&nbsp;&nbsp;<span class="id">well_founded</span> <span class="id">x2b_order</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6688')">Proof.</div>
<div class="proofscript" id="proof6688">
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ACC1</span>: <span class="kwd">forall</span> <span class="id">n</span>, <span class="id">Acc</span> <span class="id">x2b_order</span> (<span class="id">X2BI_before</span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span> <span class="id">n0</span>; <span class="tactic">pattern</span> <span class="id">n0</span>; <span class="tactic">apply</span> <span class="id">lt_wf_ind</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ACC2</span>: <span class="kwd">forall</span> <span class="id">i</span> <span class="id">n</span>, <span class="id">Acc</span> <span class="id">x2b_order</span> (<span class="id">X2BI_after</span> <span class="id">n</span> <span class="id">i</span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span> <span class="id">i</span>; <span class="tactic">pattern</span> <span class="id">i</span>. <span class="tactic">eapply</span> <span class="id">well_founded_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">wf_clos_trans</span>. <span class="tactic">eapply</span> <span class="id">xsim_order_wf</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">pattern</span> <span class="id">n</span>. <span class="tactic">apply</span> <span class="id">lt_wf_ind</span>; <span class="id">i</span>. <span class="tactic">clear</span> <span class="id">n</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Constructing the backward simulation </div>
<br/>
<span class="kwd">Inductive</span> <span class="id">x2b_match_states</span>: <span class="id">x2b_index</span> -&gt; <span class="id">state</span> <span class="id">L1</span> -&gt; <span class="id">state</span> <span class="id">L2</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">x2b_match_at</span>: <span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_states</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x2b_match_states</span> (<span class="id">X2BI_after</span> <span class="id">O</span> <span class="id">i</span>) <span class="id">s1</span> <span class="id">s2</span><br/>
&nbsp;&nbsp;| <span class="id">x2b_match_before</span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>' <span class="id">s2b</span> <span class="id">s2</span> <span class="id">n</span> <span class="id">s2a</span> <span class="id">mt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id">L1</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>' -&gt;  <span class="id">t</span> &lt;&gt; <span class="id">E0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">DStar</span> <span class="id">mt</span> <span class="id">L2</span> <span class="id">s2b</span> <span class="id">E0</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">DStarN</span> <span class="id">mt</span> <span class="id">L2</span> <span class="id">n</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> <span class="id">L1</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((&lt;&lt;<span class="id">PLUS</span>: <span class="id">DPlus</span> <span class="id">mt</span> <span class="id">L2</span> <span class="id">s2b</span> <span class="id">t</span> <span class="id">s2</span>' /\ (&lt;&lt;<span class="id">RECEPTIVE</span>: <span class="id">receptive_at</span> <span class="id">mt</span> <span class="id">L1</span> <span class="id">s1</span>&gt;&gt;)&gt;&gt;) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">STUTTER</span>: <span class="id">s2b</span> = <span class="id">s2</span>' /\ <span class="id">t</span> = <span class="id">E0</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">match_states</span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x2b_match_states</span> (<span class="id">X2BI_before</span> <span class="id">n</span>) <span class="id">s1</span> <span class="id">s2</span><br/>
&nbsp;&nbsp;| <span class="id">x2b_match_after</span>: <span class="kwd">forall</span> <span class="id">n</span> <span class="id">s2</span> <span class="id">s2a</span> <span class="id">s1</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SDStarN</span> <span class="id">L2</span> (<span class="id">S</span> <span class="id">n</span>) <span class="id">s2</span> <span class="id">E0</span> <span class="id">s2a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_states</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x2b_match_states</span> (<span class="id">X2BI_after</span> (<span class="id">S</span> <span class="id">n</span>) <span class="id">i</span>) <span class="id">s1</span> <span class="id">s2</span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id">x2b_match_after</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">s2</span> <span class="id">s2a</span> <span class="id">s1</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id">SDStarN</span> <span class="id">L2</span> <span class="id">n</span> <span class="id">s2</span> <span class="id">E0</span> <span class="id">s2a</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">match_states</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2a</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">x2b_match_states</span> (<span class="id">X2BI_after</span> <span class="id">n</span> <span class="id">i</span>) <span class="id">s1</span> <span class="id">s2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6689')">Proof.</div>
<div class="proofscript" id="proof6689">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">_xsim_backward_mon_x2b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BSIM</span>: <span class="id">_xsim_backward</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span> <span class="id">match_states</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">BSIM</span>: <span class="id">_xsim_backward</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">x2b_order</span> <span class="id">x2b_match_states</span> (<span class="id">X2BI_after</span> 0 <span class="id">i0</span>) <span class="id">st_src0</span> <span class="id">st_tgt0</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6690')">Proof.</div>
<div class="proofscript" id="proof6690">
&nbsp;&nbsp;<span class="tactic">red</span>. <span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>; <span class="id">pclearbot</span>; <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">right</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">econs</span> 3; <span class="tactic">eauto</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">pclearbot</span>. <span class="id">des</span>. <span class="id">econs</span> 2; <span class="tactic">eauto</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">econs</span> 3; <span class="tactic">eauto</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Exploiting mixed simulation </div>
<br/>
<span class="kwd">Inductive</span> <span class="id">x2b_transitions</span>: <span class="id">index</span> -&gt; <span class="id">state</span> <span class="id">L1</span> -&gt; <span class="id">state</span> <span class="id">L2</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">x2b_trans_forward_final</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span> <span class="id">st_src0</span> <span class="id">st_src1</span> <span class="id">st_tgt0</span> <span class="id">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TAU</span>: <span class="id">Star</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">E0</span> <span class="id">st_src1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINALSRC</span>: <span class="id">final_state</span> <span class="id">L1</span> <span class="id">st_src1</span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINALTGT</span>: <span class="id">Dfinal_state</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">r</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x2b_transitions</span> <span class="id">i</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span><br/>
&nbsp;&nbsp;| <span class="id">x2b_trans_forward_step</span>: <span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s1</span>' <span class="id">t</span> <span class="id">s1</span>'' <span class="id">s2</span>' <span class="id">i</span>' <span class="id">i</span>'' <span class="id">mt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Star</span> <span class="id">L1</span> <span class="id">s1</span> <span class="id">E0</span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id">L1</span> <span class="id">s1</span>' <span class="id">t</span> <span class="id">s1</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">DPlus</span> <span class="id">mt</span> <span class="id">L2</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">STEP</span>: <span class="kwd">forall</span> <span class="id">st_src1</span> <span class="id">tr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEPSRC</span>: <span class="id">Step</span> <span class="id">L1</span> <span class="id">s1</span>' <span class="id">tr</span> <span class="id">st_src1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i1</span> <span class="id">st_tgt1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((&lt;&lt;<span class="id">PLUS</span>: <span class="id">DPlus</span> <span class="id">mt</span> <span class="id">L2</span> <span class="id">s2</span> <span class="id">tr</span> <span class="id">st_tgt1</span> /\ (&lt;&lt;<span class="id">RECEPTIVE</span>: <span class="id">receptive_at</span> <span class="id">mt</span> <span class="id">L1</span> <span class="id">s1</span>'&gt;&gt;)&gt;&gt;) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">STUTTER</span>: <span class="id">s2</span> = <span class="id">st_tgt1</span> /\ <span class="id">tr</span> = <span class="id">E0</span> /\ <span class="id">order</span> <span class="id">i1</span> <span class="id">i</span>'&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ &lt;&lt;<span class="id">FSIM</span>: <span class="id">match_states</span> <span class="id">i1</span> <span class="id">st_src1</span> <span class="id">st_tgt1</span>&gt;&gt;),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_states</span> <span class="id">i</span>'' <span class="id">s1</span>'' <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x2b_transitions</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span><br/>
&nbsp;&nbsp;| <span class="id">x2b_trans_forward_stutter</span>: <span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s1</span>' <span class="id">s2</span>' <span class="id">i</span>' <span class="id">i</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Star</span> <span class="id">L1</span> <span class="id">s1</span> <span class="id">E0</span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">True</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SDPlus</span> <span class="id">L2</span> <span class="id">s2</span> <span class="id">E0</span> <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_states</span> <span class="id">i</span>'' <span class="id">s1</span>' <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">ORD0</span>: <span class="id">clos_refl_trans</span> <span class="id">_</span> <span class="id">order</span> <span class="id">i</span>' <span class="id">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ORD1</span>: <span class="id">order</span> <span class="id">i</span>'' <span class="id">i</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x2b_transitions</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span><br/>
&nbsp;&nbsp;| <span class="id">x2b_trans_backward</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BSIM</span>: <span class="id">_xsim_backward</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">x2b_order</span> <span class="id">x2b_match_states</span> (<span class="id">X2BI_after</span> 0 <span class="id">i0</span>) <span class="id">st_src0</span> <span class="id">st_tgt0</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x2b_transitions</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">x2b_transitions_src_tau_rev</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">s1</span> <span class="id">s1</span>' <span class="id">i</span> <span class="id">i</span>' <span class="id">s2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEPSRC</span>: <span class="id">Star</span> <span class="id">L1</span> <span class="id">s1</span> <span class="id">E0</span> <span class="id">s1</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ORDER</span>: <span class="id">order</span> <span class="id">i</span>' <span class="id">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TRANS</span>: <span class="id">x2b_transitions</span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">TRANS</span>: <span class="id">x2b_transitions</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6691')">Proof.</div>
<div class="proofscript" id="proof6691">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TRANS</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id">x2b_trans_forward_final</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id">x2b_trans_forward_step</span>; <span class="id">cycle</span> 1; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id">x2b_trans_forward_stutter</span>; <span class="id">cycle</span> 1; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">rt_trans</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id">x2b_trans_backward</span>; <span class="id">cycle</span> 1; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">exploit</span> <span class="id">FINAL</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">SAFESRC</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">FINALSRC</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP</span>. { <span class="id">ii</span>. <span class="tactic">apply</span> <span class="id">SAFESRC</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>. } <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">star_plus_trans</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">right</span>. <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">STAR0</span>; <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">t_trans</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="tactic">eapply</span> <span class="id">PROGRESS</span>. <span class="tactic">eapply</span> <span class="id">star_safe</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span> 2; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">BSIM</span>; <span class="tactic">eauto</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">STAR0</span>; <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">t_trans</span>; <span class="tactic">eauto</span>. }<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">x2b_progress</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>, <span class="id">match_states</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span> -&gt; <span class="id">safe</span> <span class="id">L1</span> <span class="id">s1</span> -&gt; <span class="id">x2b_transitions</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6692')">Proof.</div>
<div class="proofscript" id="proof6692">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i0</span>; <span class="tactic">pattern</span> <span class="id">i0</span>. <span class="tactic">apply</span> <span class="id">well_founded_ind</span> <span class="kwd">with</span> (<span class="id">R</span> := <span class="id">order</span>). <span class="tactic">eapply</span> <span class="id">xsim_order_wf</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">REC</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">MATCH</span> <span class="id">SAFE</span>. <span class="tactic">inversion</span> <span class="id">MIXED_SIM</span>. <span class="id">dup</span> <span class="id">MATCH</span>. <span class="id">punfold</span> <span class="id">MATCH0</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;forward&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">MATCH0</span>; <span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id">NW</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id">SAFE</span> <span class="id">s1</span>) <span class="kwd">as</span> [[<span class="id">r</span> <span class="id">FINAL1</span>] | [<span class="id">t</span> [<span class="id">s1</span>' <span class="id">STEP1</span>]]]. <span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;final&nbsp;state&nbsp;reached&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">x2b_trans_forward_final</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">star_refl</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">FINAL</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">des</span>. <span class="id">pclearbot</span>. <span class="id">inv</span> <span class="id">PLUS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">x2b_trans_forward_stutter</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">STAR0</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">star_refl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">econs</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span> 2; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;L1&nbsp;can&nbsp;make&nbsp;one&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">MATCH</span>']]]. <span class="id">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">B</span>: <span class="id">DPlus</span> <span class="id">mt</span> <span class="id">L2</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>' \/ (<span class="id">s2</span> = <span class="id">s2</span>' /\ <span class="id">t</span> = <span class="id">E0</span> /\ <span class="id">order</span> <span class="id">i</span>' <span class="id">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">des</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">A</span>. <span class="tactic">destruct</span> <span class="id">B</span> <span class="kwd">as</span> [<span class="id">PLUS2</span> | [<span class="id">EQ1</span> [<span class="id">EQ2</span> <span class="id">ORDER</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">x2b_trans_forward_step</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">pclearbot</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">exploit</span> <span class="id">REC</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">star_safe</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">star_one</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">eapply</span> <span class="id">x2b_transitions_src_tau_rev</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">star_one</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">des</span>. <span class="id">pclearbot</span>. <span class="id">clears</span> <span class="id">t</span>. <span class="tactic">clear</span> <span class="id">t</span>. <span class="id">inv</span> <span class="id">PLUS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>, <span class="id">t2</span>; <span class="id">ss</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">x2b_trans_forward_stutter</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">rt_refl</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;backward&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span> 4. <span class="tactic">eapply</span> <span class="id">_xsim_backward_mon_x2b</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">_xsim_backward_mon</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">pclearbot</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xsim_simulation_not_E0</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> <span class="id">L1</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>' -&gt; <span class="id">t</span> &lt;&gt; <span class="id">E0</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">mt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">receptive_at</span> <span class="id">mt</span> <span class="id">L1</span> <span class="id">s1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> <span class="id">L1</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DPlus</span> <span class="id">mt</span> <span class="id">L2</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>' \/ (<span class="id">s2</span> = <span class="id">s2</span>' /\ <span class="id">t</span> = <span class="id">E0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">match_states</span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s2</span>', <span class="id">DPlus</span> <span class="id">mt</span> <span class="id">L2</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>' /\ <span class="id">match_states</span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6693')">Proof.</div>
<div class="proofscript" id="proof6693">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">A</span>. <span class="tactic">auto</span>. <span class="id">des</span>. <span class="id">clarify</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Exploiting determinacy </div>
<br/>
<span class="kwd">Lemma</span> <span class="id">determinacy_inv</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">t</span>' <span class="id">s2</span>' <span class="id">t</span>'' <span class="id">s2</span>'' (<span class="id">mt</span>: <span class="id">match_traces</span>),<br/>
&nbsp;&nbsp;<span class="id">determinate_at</span> <span class="id">mt</span> <span class="id">L2</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">Step</span> <span class="id">L2</span> <span class="id">s2</span> <span class="id">t</span>' <span class="id">s2</span>' -&gt; <span class="id">Step</span> <span class="id">L2</span> <span class="id">s2</span> <span class="id">t</span>'' <span class="id">s2</span>'' -&gt;<br/>
&nbsp;&nbsp;(<span class="id">t</span>' = <span class="id">E0</span> /\ <span class="id">t</span>'' = <span class="id">E0</span> /\ <span class="id">s2</span>' = <span class="id">s2</span>'')<br/>
&nbsp;&nbsp;\/ (<span class="id">t</span>' &lt;&gt; <span class="id">E0</span> /\ <span class="id">t</span>'' &lt;&gt; <span class="id">E0</span> /\ <span class="id">mt</span> <span class="id">t</span>' <span class="id">t</span>'').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6694')">Proof.</div>
<div class="proofscript" id="proof6694">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">mt</span> <span class="id">t</span>' <span class="id">t</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">sd_determ_at</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">silent_or_not_silent</span> <span class="id">t</span>').<br/>
&nbsp;&nbsp;- <span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id">mt_nil_left</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">clarify</span>. <span class="id">left</span>; <span class="tactic">intuition</span>. <span class="tactic">eapply</span> <span class="id">sd_determ_at</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id">silent_or_not_silent</span> <span class="id">t</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id">mt_nil_right</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>; <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">determinacy_star</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">s1</span> <span class="id">mt_at</span>, <span class="id">DStar</span> <span class="id">mt_at</span> <span class="id">L2</span> <span class="id">s</span> <span class="id">E0</span> <span class="id">s1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">s2</span> <span class="id">s3</span>,<br/>
&nbsp;&nbsp;<span class="id">DStep</span> <span class="id">mt_at</span> <span class="id">L2</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span> -&gt; <span class="id">t</span> &lt;&gt; <span class="id">E0</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">DStar</span> <span class="id">mt_at</span> <span class="id">L2</span> <span class="id">s</span> <span class="id">t</span> <span class="id">s3</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">DStar</span> <span class="id">mt_at</span> <span class="id">L2</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s3</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6695')">Proof.</div>
<div class="proofscript" id="proof6695">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">s0</span> <span class="id">s01</span> <span class="id">mt_at</span> <span class="id">ST0</span>. <span class="tactic">pattern</span> <span class="id">s0</span>, <span class="id">s01</span>. <span class="tactic">eapply</span> <span class="id">star_E0_ind</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">congruence</span>. <span class="tactic">destruct</span> <span class="id">H</span>, <span class="id">H1</span>, <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">determinacy_inv</span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="id">eexact</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">EQ1</span> [<span class="id">EQ2</span> <span class="id">EQ3</span>]] | [<span class="id">NEQ1</span> [<span class="id">NEQ2</span> <span class="id">MT</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Backward simulation of L2 steps </div>
<br/>
<span class="kwd">Lemma</span> <span class="id">x2b_match_states_bsim</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i0_x2b</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCH</span>: <span class="id">x2b_match_states</span> <span class="id">i0_x2b</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">BSIM</span>: <span class="id">bsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">x2b_order</span> <span class="id">i0_x2b</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6696')">Proof.</div>
<div class="proofscript" id="proof6696">
&nbsp;&nbsp;<span class="tactic">red</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_src0</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_tgt0</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">i0_x2b</span>.<br/>
&nbsp;&nbsp;<span class="id">pcofix</span> <span class="id">CIH</span>. <span class="id">i</span>. <span class="tactic">rename</span> <span class="id">r</span> <span class="id">into</span> <span class="id">rr</span>. <span class="id">pfold</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">PROGRESS</span>: <span class="id">safe</span> <span class="id">L1</span> <span class="id">st_src0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FINAL</span>: <span class="id">exists</span> <span class="id">retv</span> : <span class="id">int</span>, <span class="id">final_state</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">retv</span> &gt;&gt; \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">STEP</span>: <span class="id">exists</span> (<span class="id">tr</span> : <span class="id">trace</span>) (<span class="id">st_tgt1</span> : <span class="id">state</span> <span class="id">L2</span>), <span class="id">Step</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">tr</span> <span class="id">st_tgt1</span> &gt;&gt;).<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;PROGRESS&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_src0</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_tgt0</span>. <span class="tactic">pattern</span> <span class="id">i0_x2b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id">well_founded_ind</span> <span class="id">wf_x2b_order</span>). <span class="tactic">clear</span> <span class="id">i0_x2b</span>. <span class="tactic">intros</span> ? <span class="id">IH</span> ? ? ? <span class="id">SAFE</span>. <span class="id">i</span>. <span class="id">inv</span> <span class="id">MATCH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">x2b_progress</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">TRANS</span>; <span class="id">inv</span> <span class="id">TRANS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">left</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">FINALTGT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rename</span> <span class="id">H2</span> <span class="id">into</span> <span class="id">PLUS</span>. <span class="id">inv</span> <span class="id">PLUS</span>. <span class="tactic">unfold</span> <span class="id">DStep</span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">right</span>; <span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">right</span>. <span class="tactic">rename</span> <span class="id">H2</span> <span class="id">into</span> <span class="id">PLUS</span>. <span class="id">inv</span> <span class="id">PLUS</span>. <span class="tactic">rename</span> <span class="id">H2</span> <span class="id">into</span> <span class="id">STEP</span>. <span class="id">inv</span> <span class="id">STEP</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">specialize</span> (<span class="id">STEP</span> <span class="id">SAFE</span>). <span class="id">inv</span> <span class="id">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id">PROGRESS</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">des</span>. <span class="id">exploit</span> <span class="id">IH</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">star_safe</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rename</span> <span class="id">H2</span> <span class="id">into</span> <span class="id">STARN</span>. <span class="id">inv</span> <span class="id">STARN</span>. <span class="tactic">congruence</span>. <span class="tactic">unfold</span> <span class="id">DStep</span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">right</span>; <span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">STARN</span>. <span class="id">inv</span> <span class="id">STARN</span>. <span class="tactic">unfold</span> <span class="id">SDStep</span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">right</span>; <span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;FINAL&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="id">inv</span> <span class="id">MATCH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">x2b_progress</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">TRANS</span>. <span class="id">inv</span> <span class="id">TRANS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">assert</span>(<span class="id">retv</span> = <span class="id">r</span>). { <span class="id">inv</span> <span class="id">FINALTGT0</span>. <span class="tactic">eapply</span> <span class="id">DTM</span>; <span class="tactic">eauto</span>. } <span class="id">clarify</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rename</span> <span class="id">H2</span> <span class="id">into</span> <span class="id">PLUS</span>. <span class="id">inv</span> <span class="id">PLUS</span>. <span class="tactic">unfold</span> <span class="id">DStep</span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">exploit</span> <span class="id">sd_determ_at_final</span>; <span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rename</span> <span class="id">H2</span> <span class="id">into</span> <span class="id">PLUS</span>. <span class="id">inv</span> <span class="id">PLUS</span>. <span class="tactic">unfold</span> <span class="id">SDStep</span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">exploit</span> <span class="id">ssd_determ_at_final</span>; <span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">exploit</span> <span class="id">FINAL</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rename</span> <span class="id">H2</span> <span class="id">into</span> <span class="id">STARN</span>. <span class="id">inv</span> <span class="id">STARN</span>. <span class="tactic">congruence</span>. <span class="tactic">unfold</span> <span class="id">DStep</span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">exploit</span> <span class="id">sd_determ_at_final</span>; <span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">STARN</span>. <span class="id">inv</span> <span class="id">STARN</span>. <span class="tactic">unfold</span> <span class="id">SDStep</span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">exploit</span> <span class="id">ssd_determ_at_final</span>; <span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;STEP&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="id">inv</span> <span class="id">MATCH</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;1.&nbsp;At&nbsp;matching&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">x2b_progress</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">TRANS</span>; <span class="id">inv</span> <span class="id">TRANS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;final&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;1.1&nbsp;&nbsp;L1&nbsp;can&nbsp;reach&nbsp;final&nbsp;state&nbsp;and&nbsp;L2&nbsp;is&nbsp;at&nbsp;final&nbsp;state:&nbsp;impossible!&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span> 1; <span class="id">ss</span>. <span class="id">i</span>. <span class="id">inv</span> <span class="id">FINALTGT</span>. <span class="id">exploit</span> <span class="id">DTM0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;forward&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;1.2&nbsp;&nbsp;L1&nbsp;can&nbsp;make&nbsp;0&nbsp;or&nbsp;several&nbsp;steps;&nbsp;L2&nbsp;can&nbsp;make&nbsp;1&nbsp;or&nbsp;several&nbsp;matching&nbsp;steps.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span> 1; <span class="id">ss</span>. <span class="id">i</span>. <span class="tactic">rename</span> <span class="id">H3</span> <span class="id">into</span> <span class="id">H4</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>''' [<span class="id">s2</span>''' [<span class="id">STEP</span>''' <span class="id">MATCH</span>''']]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>. <span class="id">exploit</span> <span class="id">determinacy_inv</span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="id">eexact</span> <span class="id">STEPTGT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">EQ1</span> [<span class="id">EQ2</span> <span class="id">EQ3</span>]] | [<span class="id">NOT1</span> [<span class="id">NOT2</span> <span class="id">MT</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;1.2.1&nbsp;&nbsp;L2&nbsp;makes&nbsp;a&nbsp;silent&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id">silent_or_not_silent</span> <span class="id">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;1.2.1.1&nbsp;&nbsp;L1&nbsp;makes&nbsp;a&nbsp;silent&nbsp;transition&nbsp;too:&nbsp;perform&nbsp;transition&nbsp;now&nbsp;and&nbsp;go&nbsp;to&nbsp;"after"&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id">star_starN</span> <span class="id">H5</span>) <span class="kwd">as</span> [<span class="id">n</span> <span class="id">STEPS2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">X2BI_after</span> <span class="id">n</span> <span class="id">i</span>''); <span class="id">exists</span> <span class="id">s1</span>''; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">plus_right</span>; <span class="tactic">eauto</span>. <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">x2b_match_after</span>'; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">DStarN_E0_SDStarN</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;1.2.1.2&nbsp;L1&nbsp;makes&nbsp;a&nbsp;non-silent&nbsp;transition:&nbsp;keep&nbsp;it&nbsp;for&nbsp;later&nbsp;and&nbsp;go&nbsp;to&nbsp;"before"&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id">star_starN</span> <span class="id">H5</span>) <span class="kwd">as</span> [<span class="id">n</span> <span class="id">STEPS2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">X2BI_before</span> <span class="id">n</span>); <span class="id">exists</span> <span class="id">s1</span>'; <span class="tactic">split</span>. <span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">constructor</span>. <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">star_one</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>'''' [<span class="id">s2</span>'''' [<span class="id">A</span> <span class="id">MATCH</span>'''']]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>''''. <span class="id">exists</span> <span class="id">s2</span>''''. <span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> [?|[? ?]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>; <span class="id">clarify</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;1.2.2&nbsp;L2&nbsp;makes&nbsp;a&nbsp;non-silent&nbsp;transition,&nbsp;and&nbsp;so&nbsp;does&nbsp;L1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">clarify</span>. <span class="tactic">destruct</span> <span class="id">t1</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">not_silent_length</span>. <span class="tactic">eapply</span> (<span class="id">sr_traces_at</span> <span class="id">RECEPTIVE</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> | <span class="id">EQ</span>]. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t2</span>. <span class="tactic">rewrite</span> <span class="id">E0_right</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Use&nbsp;receptiveness&nbsp;to&nbsp;equate&nbsp;the&nbsp;traces&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">sr_receptive_at</span> <span class="id">RECEPTIVE</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s1</span>''' <span class="id">STEP1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">xsim_simulation_not_E0</span>. <span class="id">eexact</span> <span class="id">STEP1</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>'''' [<span class="id">s2</span>'''' [<span class="id">A</span> <span class="id">MATCH</span>'''']]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>''''. <span class="id">exists</span> <span class="id">s2</span>''''. <span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> [?|[? ?]]; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">des</span>. <span class="id">left</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">right</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>'''' [<span class="id">s2</span>'''' [<span class="id">P</span> <span class="id">Q</span>]]]. <span class="id">inv</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Exploit&nbsp;determinacy&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span>. <span class="id">exploit</span> <span class="id">sd_determ_at</span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">STEPTGT</span>. <span class="id">eexact</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">not_silent_length</span>. <span class="tactic">eapply</span> (<span class="id">sr_traces_at</span> <span class="id">RECEPTIVE</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> | <span class="id">EQ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">NOT2</span>. <span class="tactic">destruct</span> <span class="id">H9</span>. <span class="tactic">eapply</span> <span class="id">mt_nil_right</span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t2</span>. <span class="tactic">rewrite</span> <span class="id">E0_right</span> <span class="kwd">in</span> *. <span class="tactic">intros</span> [<span class="id">_</span> <span class="id">TRACES</span>]. <span class="tactic">assert</span> (<span class="id">s0</span> = <span class="id">st_tgt1</span>). <span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id">TRACES</span>. <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">s0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Perform&nbsp;transition&nbsp;now&nbsp;and&nbsp;go&nbsp;to&nbsp;"after"&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">star_starN</span> <span class="id">H7</span>) <span class="kwd">as</span> [<span class="id">n</span> <span class="id">STEPS2</span>]. <span class="id">exists</span> (<span class="id">X2BI_after</span> <span class="id">n</span> <span class="id">i</span>''''); <span class="id">exists</span> <span class="id">s1</span>'''; <span class="tactic">split</span>. <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">plus_right</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">eapply</span> <span class="id">CIH</span>. <span class="tactic">eapply</span> <span class="id">x2b_match_after</span>'; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">DStarN_E0_SDStarN</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">econs</span> 1; <span class="id">ss</span>. <span class="id">i</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">t1</span>, <span class="id">t2</span>; <span class="id">ss</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">ssd_determ_at</span>. <span class="tactic">apply</span> <span class="id">H4</span>. <span class="tactic">apply</span> <span class="id">H4</span>. <span class="tactic">apply</span> <span class="id">STEPTGT</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>. <span class="id">clear_tac</span>. <span class="tactic">destruct</span> (<span class="id">star_starN</span> <span class="id">H5</span>) <span class="kwd">as</span> [<span class="id">n</span> <span class="id">STEPS2</span>]. <span class="tactic">destruct</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">STEPS2</span>. <span class="id">ss</span>. <span class="id">exists</span> (<span class="id">X2BI_after</span> 0 <span class="id">i</span>''). <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">right</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">clos_t_rt</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id">CIH</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exists</span> (<span class="id">X2BI_after</span> (<span class="id">S</span> <span class="id">n</span>) <span class="id">i</span>''). <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">right</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">clos_t_rt</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id">CIH</span>. <span class="id">econs</span> 3; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;backward&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>; <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span> 2; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;2.&nbsp;Before&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span> 1; <span class="id">ss</span>. <span class="id">i</span>. <span class="tactic">assert</span>(<span class="id">DUMMY_PROP</span>) <span class="tactic">by</span> <span class="id">ss</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">congruence</span>. <span class="tactic">destruct</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">determinacy_inv</span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">H5</span>. <span class="id">eexact</span> <span class="id">STEPTGT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">EQ1</span> [<span class="id">EQ2</span> <span class="id">EQ3</span>]] | [<span class="id">NOT1</span> [<span class="id">NOT2</span> <span class="id">MT</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;2.1&nbsp;L2&nbsp;makes&nbsp;a&nbsp;silent&nbsp;transition:&nbsp;remain&nbsp;in&nbsp;"before"&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">exists</span> (<span class="id">X2BI_before</span> <span class="id">n0</span>); <span class="id">exists</span> <span class="id">st_src0</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="id">constructor</span>. <span class="tactic">omega</span>. <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">star_right</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;2.2&nbsp;L2&nbsp;make&nbsp;a&nbsp;non-silent&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">RECEPTIVE</span> : <span class="id">receptive_at</span> <span class="id">mt</span> <span class="id">L1</span> <span class="id">st_src0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>; <span class="id">clarify</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">not_silent_length</span>. <span class="tactic">eapply</span> (<span class="id">sr_traces_at</span> <span class="id">RECEPTIVE</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> | <span class="id">EQ</span>]. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">E0_right</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Use&nbsp;receptiveness&nbsp;to&nbsp;equate&nbsp;the&nbsp;traces&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">sr_receptive_at</span> <span class="id">RECEPTIVE</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s1</span>''' <span class="id">STEP1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">xsim_simulation_not_E0</span>. <span class="id">eexact</span> <span class="id">STEP1</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">exploit</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>; <span class="tactic">eauto</span>. <span class="id">clarify</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>''' [<span class="id">s2</span>''' [<span class="id">P</span> <span class="id">Q</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Exploit&nbsp;determinacy&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">determinacy_star</span>. <span class="tactic">eauto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">eexact</span> <span class="id">STEPTGT</span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">plus_star</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>. <span class="id">inv</span> <span class="id">R</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">not_silent_length</span>. <span class="tactic">eapply</span> (<span class="id">sr_traces_at</span> <span class="id">RECEPTIVE</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> | <span class="id">EQ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">H7</span>. <span class="id">exploit</span> <span class="id">sd_determ_at</span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">STEPTGT</span>. <span class="id">eexact</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">NOT2</span>. <span class="tactic">destruct</span> <span class="id">H10</span>. <span class="tactic">eapply</span> <span class="id">mt_nil_right</span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">E0_right</span> <span class="kwd">in</span> *.  <span class="tactic">destruct</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">s2</span> = <span class="id">st_tgt1</span>). <span class="tactic">eapply</span> <span class="id">sd_determ_at</span>; <span class="tactic">eauto</span>. <span class="tactic">subst</span> <span class="id">s2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Perform&nbsp;transition&nbsp;now&nbsp;and&nbsp;go&nbsp;to&nbsp;"after"&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">star_starN</span> <span class="id">H8</span>) <span class="kwd">as</span> [<span class="id">n</span> <span class="id">STEPS2</span>]. <span class="id">exists</span> (<span class="id">X2BI_after</span> <span class="id">n</span> <span class="id">i</span>'''); <span class="id">exists</span> <span class="id">s1</span>'''; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id">plus_one</span>; <span class="tactic">auto</span>. <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id">CIH</span>. <span class="tactic">eapply</span> <span class="id">x2b_match_after</span>'; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">DStarN_E0_SDStarN</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;3.&nbsp;After&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span> 1; <span class="id">ss</span>. <span class="id">i</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id">Eapp_E0_inv</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ1</span> <span class="id">EQ2</span>]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>. <span class="id">exploit</span> <span class="id">ssd_determ_at</span>. <span class="tactic">eapply</span> <span class="id">H</span>. <span class="id">eexact</span> <span class="id">H1</span>. <span class="id">eexact</span> <span class="id">STEPTGT</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">X2BI_after</span> <span class="id">n</span> <span class="id">i</span>); <span class="id">exists</span> <span class="id">st_src0</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="id">constructor</span>. <span class="id">constructor</span>; <span class="tactic">omega</span>. <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">x2b_match_after</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bsim_to_xsim</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BSIM</span>: <span class="id">bsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6697')">Proof.</div>
<div class="proofscript" id="proof6697">
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">i0</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_src0</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">st_tgt0</span>. <span class="id">pcofix</span> <span class="id">CIH</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">pfold</span>. <span class="id">right</span>. <span class="id">punfold</span> <span class="id">BSIM</span>. <span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">pclearbot</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span> 2; <span class="tactic">eauto</span>. <span class="id">pclearbot</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">MIXED_TO_BACKWARD</span>.<br/>
<br/>
<div class="doc">The backward simulation </div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mixed_to_backward_simulation</span>: <span class="kwd">forall</span> <span class="id">L1</span> <span class="id">L2</span>,<br/>
&nbsp;&nbsp;<span class="id">mixed_simulation</span> <span class="id">L1</span> <span class="id">L2</span> -&gt; <span class="id">backward_simulation</span> <span class="id">L1</span> <span class="id">L2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6698')">Proof.</div>
<div class="proofscript" id="proof6698">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">XSIM</span>. <span class="tactic">inversion</span> <span class="id">XSIM</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Backward_simulation</span> <span class="kwd">with</span> (<span class="id">order0</span> := <span class="id">x2b_order</span> <span class="id">order</span>). <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">wf_x2b_order</span>. <span class="tactic">apply</span> <span class="id">props</span>.<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">props</span>. <span class="id">inv</span> <span class="id">xsim_initial_states_sim0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="id">exploit</span> <span class="id">INITSIM</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">INITTGT</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">props</span>. <span class="id">i</span>. <span class="id">inv</span> <span class="id">xsim_initial_states_sim0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">INITSIM</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">INITTGT0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">st_init_tgt</span> = <span class="id">st_init_tgt0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">DTM</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clarify</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">x2b_match_states_bsim</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">INITSIM</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">x2b_match_states_bsim</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">econs</span> 2; <span class="tactic">eauto</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mixed_to_compcert_backward_simulation</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L1</span> <span class="id">L2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">XSIM</span>: <span class="id">mixed_simulation</span> <span class="id">L1</span> <span class="id">L2</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">BSIM</span>: <span class="id">Smallstep.backward_simulation</span> <span class="id">L1</span> <span class="id">L2</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6699')">Proof.</div>
<div class="proofscript" id="proof6699">
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">backward_to_compcert_backward_simulation</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">mixed_to_backward_simulation</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">backward_to_mixed_simulation</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L1</span> <span class="id">L2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BSIM</span>: <span class="id">backward_simulation</span> <span class="id">L1</span> <span class="id">L2</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">XSIM</span>: <span class="id">mixed_simulation</span> <span class="id">L1</span> <span class="id">L2</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6700')">Proof.</div>
<div class="proofscript" id="proof6700">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">BSIM</span>. <span class="id">inv</span> <span class="id">props</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">econs</span> 2; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">i</span>. <span class="id">exploit</span> <span class="id">bsim_match_initial_states0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">bsim_to_xsim</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">receptive_at_default</span> (<span class="id">L</span>: <span class="id">semantics</span>): <span class="id">L</span>.(<span class="id">state</span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;(<span class="id">receptive_at</span> (<span class="id">match_traces_default</span> <span class="id">L</span>.(<span class="id">symbolenv</span>)) <span class="id">L</span>).<br/>
<span class="kwd">Definition</span> <span class="id">determinate_at_default</span> (<span class="id">L</span>: <span class="id">semantics</span>): <span class="id">L</span>.(<span class="id">state</span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;(<span class="id">determinate_at</span> (<span class="id">match_traces_default</span> <span class="id">L</span>.(<span class="id">symbolenv</span>)) <span class="id">L</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">match_traces_eta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mt0</span> <span class="id">mt1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EQ</span>: <span class="id">mt0</span>.(<span class="id">mt_match</span>) = <span class="id">mt1</span>.(<span class="id">mt_match</span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mt0</span> = <span class="id">mt1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6701')">Proof.</div>
<div class="proofscript" id="proof6701">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mt0</span>, <span class="id">mt1</span>; <span class="id">ss</span>. <span class="id">clarify</span>. <span class="tactic">f_equal</span>; <span class="tactic">eapply</span> <span class="id">Axioms.proof_irr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">GENMT</span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Record</span> <span class="id">receptive_at</span> (<span class="id">L</span>: <span class="id">semantics</span>) (<span class="id">s</span>:<span class="id">L</span>.(<span class="id">state</span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">Receptive_at</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sr_receptive_at</span>: <span class="kwd">forall</span> <span class="id">t1</span> <span class="id">s1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">s1</span> -&gt; <span class="id">match_traces</span> <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">t1</span> <span class="id">t2</span> -&gt; <span class="id">exists</span> <span class="id">s2</span>, <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">s2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sr_traces_at</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">single_events_at</span> <span class="id">L</span> <span class="id">s</span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">well_behaved_traces_at</span> (<span class="id">L</span>: <span class="id">semantics</span>) (<span class="id">s</span>:<span class="id">L</span>.(<span class="id">state</span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">s</span>', <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t</span> <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">t</span> <span class="kwd">with</span> <span class="id">nil</span> =&gt; <span class="id">True</span> | <span class="id">ev</span> :: <span class="id">t</span>' =&gt; <span class="id">output_trace</span> <span class="id">t</span>' <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id">strongly_receptive_at</span> (<span class="id">L</span>: <span class="id">semantics</span>) (<span class="id">s</span>:<span class="id">L</span>.(<span class="id">state</span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">Strongly_receptive_at</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ssr_receptive_at</span>: <span class="kwd">forall</span> <span class="id">ev1</span> <span class="id">t1</span> <span class="id">s1</span> <span class="id">ev2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> (<span class="id">ev1</span> :: <span class="id">t1</span>) <span class="id">s1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_traces</span> (<span class="id">symbolenv</span> <span class="id">L</span>) (<span class="id">ev1</span> :: <span class="id">nil</span>) (<span class="id">ev2</span> :: <span class="id">nil</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>, <span class="id">exists</span> <span class="id">t2</span>, <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> (<span class="id">ev2</span> :: <span class="id">t2</span>) <span class="id">s2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ssr_traces_at</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">well_behaved_traces_at</span> <span class="id">L</span> <span class="id">s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Record</span> <span class="id">determinate_at</span> (<span class="id">L</span>: <span class="id">semantics</span>) (<span class="id">s</span>:<span class="id">L</span>.(<span class="id">state</span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">Determinate_at</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sd_determ_at</span>: <span class="kwd">forall</span> <span class="id">t1</span> <span class="id">s1</span> <span class="id">t2</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">s1</span> -&gt; <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_traces</span> <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">t1</span> <span class="id">t2</span> /\ (<span class="id">t1</span> = <span class="id">t2</span> -&gt; <span class="id">s1</span> = <span class="id">s2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sd_determ_at_final</span>: <span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr</span> <span class="id">s</span>' <span class="id">retv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="id">final_state</span> <span class="id">L</span> <span class="id">s</span> <span class="id">retv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="id">Step</span> <span class="id">L</span> <span class="id">s</span> <span class="id">tr</span> <span class="id">s</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">False</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sd_traces_at</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">single_events_at</span> <span class="id">L</span> <span class="id">s</span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">DStep</span> (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span> =&gt; <span class="id">determinate_at</span> <span class="id">L</span> <span class="id">s1</span> /\ <span class="id">Step</span> <span class="id">L</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">DStar</span> (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">star</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">DStep</span> <span class="id">L</span>)) <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">L</span>.(<span class="id">globalenv</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">DStarN</span> (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">starN</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">DStep</span> <span class="id">L</span>)) <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">L</span>.(<span class="id">globalenv</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">DPlus</span> (<span class="id">L</span>: <span class="id">semantics</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">plus</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">DStep</span> <span class="id">L</span>)) <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">L</span>.(<span class="id">globalenv</span>).<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id">DStep</span> <span class="id">DStar</span> <span class="id">DStarN</span> <span class="id">DPlus</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">MIXED_SIM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Variables</span> <span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id">index</span>: <span class="kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">sfsim_step</span> <span class="id">xsim</span> (<span class="id">i0</span>: <span class="id">index</span>) (<span class="id">st_src0</span>: <span class="id">L1</span>.(<span class="id">state</span>)) (<span class="id">st_tgt0</span>: <span class="id">L2</span>.(<span class="id">state</span>)): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">sfsim_step_step</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="kwd">forall</span> <span class="id">st_src1</span> <span class="id">tr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEPSRC</span>: <span class="id">Step</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">tr</span> <span class="id">st_src1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i1</span> <span class="id">st_tgt1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">PLUS</span>: <span class="id">SDPlus</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">tr</span> <span class="id">st_tgt1</span>&gt;&gt; \/ &lt;&lt;<span class="id">STAR</span>: <span class="id">SDStar</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">tr</span> <span class="id">st_tgt1</span> /\ <span class="id">order</span> <span class="id">i1</span> <span class="id">i0</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ &lt;&lt;<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">i1</span> <span class="id">st_src1</span> <span class="id">st_tgt1</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SINGLE</span>: <span class="id">single_events_at</span> <span class="id">L1</span> <span class="id">st_src0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="kwd">forall</span> <span class="id">retv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINALSRC</span>: <span class="id">final_state</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">retv</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FINALTGT</span>: <span class="id">Dfinal_state</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">retv</span>&gt;&gt;)<br/>
&nbsp;&nbsp;| <span class="id">sfsim_step_stutter</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i1</span> <span class="id">st_tgt1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PLUS</span>: <span class="id">SDPlus</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">nil</span> <span class="id">st_tgt1</span> /\ <span class="id">order</span> <span class="id">i1</span> <span class="id">i0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">i1</span> <span class="id">st_src0</span> <span class="id">st_tgt1</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">_xsim_strict_forward</span> <span class="id">xsim</span> (<span class="id">i0</span>: <span class="id">index</span>) (<span class="id">st_src0</span>: <span class="id">state</span> <span class="id">L1</span>) (<span class="id">st_tgt0</span>: <span class="id">state</span> <span class="id">L2</span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">_xsim_strict_forward_intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="id">sfsim_step</span> <span class="id">xsim</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">fsim_step</span> <span class="id">xsim</span> (<span class="id">i0</span>: <span class="id">index</span>) (<span class="id">st_src0</span>: <span class="id">L1</span>.(<span class="id">state</span>)) (<span class="id">st_tgt0</span>: <span class="id">L2</span>.(<span class="id">state</span>)): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">fsim_step_step</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="kwd">forall</span> <span class="id">st_src1</span> <span class="id">tr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEPSRC</span>: <span class="id">Step</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">tr</span> <span class="id">st_src1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i1</span> <span class="id">st_tgt1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((&lt;&lt;<span class="id">PLUS</span>: <span class="id">DPlus</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">tr</span> <span class="id">st_tgt1</span> /\ (&lt;&lt;<span class="id">RECEPTIVE</span>: <span class="id">receptive_at</span> <span class="id">L1</span> <span class="id">st_src0</span>&gt;&gt;)&gt;&gt;) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">STUTTER</span>: <span class="id">st_tgt0</span> = <span class="id">st_tgt1</span> /\ <span class="id">tr</span> = <span class="id">E0</span> /\ <span class="id">order</span> <span class="id">i1</span> <span class="id">i0</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ &lt;&lt;<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">i1</span> <span class="id">st_src1</span> <span class="id">st_tgt1</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="kwd">forall</span> <span class="id">retv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINALSRC</span>: <span class="id">final_state</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">retv</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FINALTGT</span>: <span class="id">Dfinal_state</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">retv</span>&gt;&gt;)<br/>
&nbsp;&nbsp;| <span class="id">fsim_step_stutter</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i1</span> <span class="id">st_tgt1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PLUS</span>: <span class="id">DPlus</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">nil</span> <span class="id">st_tgt1</span> /\ <span class="id">order</span> <span class="id">i1</span> <span class="id">i0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">i1</span> <span class="id">st_src0</span> <span class="id">st_tgt1</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">_xsim_forward</span> <span class="id">xsim</span> (<span class="id">i0</span>: <span class="id">index</span>) (<span class="id">st_src0</span>: <span class="id">state</span> <span class="id">L1</span>) (<span class="id">st_tgt0</span>: <span class="id">state</span> <span class="id">L2</span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">_xsim_forward_intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="id">fsim_step</span> <span class="id">xsim</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id">bsim_step</span> := <span class="id">bsim_step</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">_xsim_backward</span> <span class="id">xsim</span> (<span class="id">i0</span>: <span class="id">index</span>) (<span class="id">st_src0</span>: <span class="id">state</span> <span class="id">L1</span>) (<span class="id">st_tgt0</span>: <span class="id">state</span> <span class="id">L2</span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">_xsim_backward_intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINAL</span>: <span class="kwd">forall</span> <span class="id">retv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINALTGT</span>: <span class="id">final_state</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">retv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAFESRC</span>: <span class="id">safe</span> <span class="id">L1</span> <span class="id">st_src0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">st_src1</span>, &lt;&lt;<span class="id">STEPSRC</span>: <span class="id">Star</span> <span class="id">L1</span> <span class="id">st_src0</span> <span class="id">E0</span> <span class="id">st_src1</span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FINALSRC</span>: <span class="id">final_state</span> <span class="id">L1</span> <span class="id">st_src1</span> <span class="id">retv</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAFESRC</span>: <span class="id">safe</span> <span class="id">L1</span> <span class="id">st_src0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">STEP</span>: <span class="id">bsim_step</span> <span class="id">xsim</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>&gt;&gt;).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">xsim</span>: <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="id">_</span> -&gt; <span class="kwd">Prop</span> := <span class="id">paco3</span> (<span class="id">_xsim_strict_forward</span> \4/ <span class="id">_xsim_forward</span> \4/ <span class="id">_xsim_backward</span>) <span class="id">bot3</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">_xsim_strict_forward_mon</span>: <span class="id">monotone3</span> (<span class="id">_xsim_strict_forward</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6702')">Proof.</div>
<div class="proofscript" id="proof6702">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">IN</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span> 2; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">_xsim_forward_mon</span>: <span class="id">monotone3</span> (<span class="id">_xsim_forward</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6703')">Proof.</div>
<div class="proofscript" id="proof6703">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">IN</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span> 2; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">_xsim_backward_mon</span>: <span class="id">monotone3</span> (<span class="id">_xsim_backward</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6704')">Proof.</div>
<div class="proofscript" id="proof6704">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">IN</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eleft</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">eright</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">xsim_mon</span>: <span class="id">monotone3</span> (<span class="id">_xsim_strict_forward</span> \4/ <span class="id">_xsim_forward</span> \4/ <span class="id">_xsim_backward</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6705')">Proof.</div>
<div class="proofscript" id="proof6705">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">_xsim_strict_forward_mon</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id">_xsim_forward_mon</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id">_xsim_backward_mon</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">MIXED_SIM</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id">xsim</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">xsim_mon</span>: <span class="id">paco</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">_xsim_strict_forward_mon</span>: <span class="id">paco</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">_xsim_forward_mon</span>: <span class="id">paco</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">_xsim_backward_mon</span>: <span class="id">paco</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">xsim_init_sim</span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>) (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>): <span class="kwd">Prop</span> :=<br/>
| <span class="id">xsim_init_forward</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSIM</span>: <span class="kwd">forall</span> <span class="id">st_init_src</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i0</span> <span class="id">st_init_tgt</span>, &lt;&lt;<span class="id">INITTGT</span>: <span class="id">Dinitial_state</span> <span class="id">L2</span> <span class="id">st_init_tgt</span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span> <span class="id">i0</span> <span class="id">st_init_src</span> <span class="id">st_init_tgt</span>&gt;&gt;)<br/>
| <span class="id">xsim_init_backward</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITEXISTS</span>: <span class="kwd">forall</span> <span class="id">st_init_src</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">st_init_tgt</span>, &lt;&lt;<span class="id">INITTGT</span>: <span class="id">initial_state</span> <span class="id">L2</span> <span class="id">st_init_tgt</span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSIM</span>: <span class="kwd">forall</span> <span class="id">st_init_src_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">st_init_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITTGT</span>: <span class="id">initial_state</span> <span class="id">L2</span> <span class="id">st_init_tgt</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i0</span> <span class="id">st_init_src</span>, &lt;&lt;<span class="id">INITSRC</span>: <span class="id">initial_state</span> <span class="id">L1</span> <span class="id">st_init_src</span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span> <span class="id">i0</span> <span class="id">st_init_src</span> <span class="id">st_init_tgt</span>&gt;&gt;)<br/>
.<br/>
<br/>
<span class="kwd">Record</span> <span class="id">xsim_properties</span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>) (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>): <span class="kwd">Prop</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xsim_order_wf</span>: &lt;&lt;<span class="id">WF</span>: <span class="id">well_founded</span> <span class="id">order</span>&gt;&gt;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xsim_initial_states_sim</span>: &lt;&lt;<span class="id">INIT</span>: <span class="id">xsim_init_sim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span>&gt;&gt;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xsim_public_preserved</span>: <span class="kwd">forall</span> (<span class="id">SAFESRC</span>: <span class="id">exists</span> <span class="id">st_init_src</span>, <span class="id">L1</span>.(<span class="id">initial_state</span>) <span class="id">st_init_src</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id">Senv.public_symbol</span> (<span class="id">symbolenv</span> <span class="id">L2</span>) <span class="id">id</span> = <span class="id">Senv.public_symbol</span> (<span class="id">symbolenv</span> <span class="id">L1</span>) <span class="id">id</span>;<br/>
}.<br/>
<br/>
<span class="id">Arguments</span> <span class="id">xsim_properties</span>: <span class="tactic">clear</span> <span class="id">implicits</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">mixed_simulation</span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id">semantics</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">Mixed_simulation</span> (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">props</span>: <span class="id">xsim_properties</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span> <span class="id">order</span>).<br/>
<br/>
<span class="id">Arguments</span> <span class="id">Mixed_simulation</span> {<span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span>} <span class="id">order</span> <span class="id">props</span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">GENMT_determinate_at_iff</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L</span> <span class="id">st0</span> <span class="id">se</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DTM</span>: <span class="id">determinate_at</span> <span class="id">L</span> <span class="id">st0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PUBEQ</span>: <span class="kwd">forall</span> <span class="id">id</span>, <span class="id">Senv.public_symbol</span> <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">id</span> = <span class="id">Senv.public_symbol</span> <span class="id">se</span> <span class="id">id</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">DTM</span>: <span class="id">GENMT.determinate_at</span> (<span class="id">GENMT.match_traces_default</span> <span class="id">se</span>) <span class="id">L</span> <span class="id">st0</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6706')">Proof.</div>
<div class="proofscript" id="proof6706">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">DTM</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">ss</span>. <span class="id">exploit</span> (<span class="id">sd_determ_at0</span> <span class="id">t1</span> <span class="id">s1</span> <span class="id">t2</span> <span class="id">s2</span>); <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">match_traces_preserved</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">GENMT_DStar_iff</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span> <span class="id">se</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DSTAR</span>: <span class="id">DStar</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PUBEQ</span>: <span class="kwd">forall</span> <span class="id">id</span>, <span class="id">Senv.public_symbol</span> <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">id</span> = <span class="id">Senv.public_symbol</span> <span class="id">se</span> <span class="id">id</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">DSTAR</span>: <span class="id">GENMT.DStar</span> (<span class="id">GENMT.match_traces_default</span> <span class="id">se</span>) <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6707')">Proof.</div>
<div class="proofscript" id="proof6707">
&nbsp;&nbsp;<span class="id">ginduction</span> <span class="id">DSTAR</span>; <span class="id">ii</span>; <span class="id">ss</span>; <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">rr</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">rr</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">GENMT_determinate_at_iff</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHDSTAR</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">GENMT_DPlus_iff</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span> <span class="id">se</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DPLUS</span>: <span class="id">DPlus</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PUBEQ</span>: <span class="kwd">forall</span> <span class="id">id</span>, <span class="id">Senv.public_symbol</span> <span class="id">L</span>.(<span class="id">symbolenv</span>) <span class="id">id</span> = <span class="id">Senv.public_symbol</span> <span class="id">se</span> <span class="id">id</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">DPLUS</span>: <span class="id">GENMT.DPlus</span> (<span class="id">GENMT.match_traces_default</span> <span class="id">se</span>) <span class="id">L</span> <span class="id">st0</span> <span class="id">tr</span> <span class="id">st1</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6708')">Proof.</div>
<div class="proofscript" id="proof6708">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">DPLUS</span>; <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">rr</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">des</span>. <span class="id">rr</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">GENMT_determinate_at_iff</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">GENMT_DStar_iff</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">GENMT_receptive_at_iff</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L</span> <span class="id">st0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RCP</span>: <span class="id">receptive_at</span> <span class="id">L</span> <span class="id">st0</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">RCP</span>: <span class="id">GENMT.receptive_at</span> (<span class="id">GENMT.match_traces_default</span> <span class="id">L</span>.(<span class="id">symbolenv</span>)) <span class="id">L</span> <span class="id">st0</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6709')">Proof.</div>
<div class="proofscript" id="proof6709">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">RCP</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">DStar_E0_SDStar</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L</span> <span class="id">st0</span> <span class="id">st1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="id">DStar</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">E0</span> <span class="id">st1</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SDStar</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">E0</span> <span class="id">st1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6710')">Proof.</div>
<div class="proofscript" id="proof6710">
&nbsp;&nbsp;<span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">STEP</span>; <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;{ <span class="id">econs</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>, <span class="id">t2</span>; <span class="id">ss</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">IHSTEP</span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:= []). <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">rr</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">rr</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="id">exploit</span> (<span class="id">sd_determ_at0</span> <span class="id">t1</span> <span class="id">s0</span> <span class="id">E0</span> <span class="id">s2</span>); <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">sd_determ_at0</span> <span class="id">t2</span> <span class="id">s4</span> <span class="id">E0</span> <span class="id">s2</span>); <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. }<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">DPlus_E0_SDPlus</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L</span> <span class="id">st0</span> <span class="id">st1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STEP</span>: <span class="id">DPlus</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">E0</span> <span class="id">st1</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SDPlus</span> <span class="id">L</span> <span class="id">st0</span> <span class="id">E0</span> <span class="id">st1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6711')">Proof.</div>
<div class="proofscript" id="proof6711">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STEP</span>. <span class="id">rr</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">des</span>. <span class="tactic">destruct</span> <span class="id">t1</span>, <span class="id">t2</span>; <span class="id">ss</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">determ_tac</span> <span class="id">sd_determ_at0</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">STEP1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">determ_tac</span> <span class="id">sd_determ_at0</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>; <span class="id">ss</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H4</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">DStar_E0_SDStar</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xsim_to_generalized_xsim</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span> (<span class="id">order</span>: <span class="id">index</span> -&gt; <span class="id">index</span> -&gt; <span class="kwd">Prop</span>) <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PUBEQ</span>: <span class="kwd">forall</span> <span class="id">id</span>, <span class="id">Senv.public_symbol</span> <span class="id">L1</span>.(<span class="id">symbolenv</span>) <span class="id">id</span> = <span class="id">Senv.public_symbol</span> <span class="id">L2</span>.(<span class="id">symbolenv</span>) <span class="id">id</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">XSIM</span>: <span class="id">xsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">XSIM</span>: <span class="id">GENMT.xsim</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">order</span> <span class="id">i0</span> <span class="id">st_src0</span> <span class="id">st_tgt0</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6712')">Proof.</div>
<div class="proofscript" id="proof6712">
&nbsp;&nbsp;<span class="id">revert_until</span> <span class="id">order</span>. <span class="id">pcofix</span> <span class="id">CIH</span>. <span class="id">i</span>. <span class="id">pfold</span>. <span class="id">punfold</span> <span class="id">XSIM</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">inv</span> <span class="id">XSIM</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">T</span>: <span class="id">SDPlus</span> <span class="id">L2</span> <span class="id">st_tgt0</span> <span class="id">tr</span> <span class="id">st_tgt1</span> \/ (<span class="id">st_tgt0</span> = <span class="id">st_tgt1</span> /\ <span class="id">tr</span> = <span class="id">E0</span> /\ <span class="id">order</span> <span class="id">i1</span> <span class="id">i0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">des</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">STAR</span>; <span class="tactic">eauto</span>. <span class="id">left</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">left</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">GENMT.strict_fsim_tgt_plus</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">GENMT.strict_fsim_src</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">pclearbot</span>. <span class="id">econs</span> 2; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">inv</span> <span class="id">XSIM</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">pclearbot</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1:= <span class="id">GENMT.match_traces_default</span> <span class="id">L1</span>.(<span class="id">symbolenv</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">GENMT_DPlus_iff</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">GENMT_receptive_at_iff</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">pclearbot</span>. <span class="id">econs</span> 2; <span class="tactic">eauto</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">DPlus_E0_SDPlus</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">inv</span> <span class="id">XSIM</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">STEP0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>. <span class="id">pclearbot</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">pclearbot</span>. <span class="id">econs</span> 2; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mixed_to_generalized_mixed_simulation</span>: <span class="kwd">forall</span> <span class="id">L1</span> <span class="id">L2</span>,<br/>
&nbsp;&nbsp;<span class="id">mixed_simulation</span> <span class="id">L1</span> <span class="id">L2</span> -&gt; <span class="id">GENMT.mixed_simulation</span> <span class="id">L1</span> <span class="id">L2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6713')">Proof.</div>
<div class="proofscript" id="proof6713">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">XSIM</span>. <span class="tactic">inversion</span> <span class="id">XSIM</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">props</span>. <span class="id">econs</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">xsim_initial_states_sim0</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span> 1; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">INITSIM</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">xsim_to_generalized_xsim</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">xsim_public_preserved0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span> 2; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">INITSIM</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">xsim_to_generalized_xsim</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">exploit</span> <span class="id">xsim_public_preserved0</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mixed_to_backward_simulation</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">L1</span> <span class="id">L2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">XSIM</span>: <span class="id">mixed_simulation</span> <span class="id">L1</span> <span class="id">L2</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">BSIM</span>: <span class="id">backward_simulation</span> <span class="id">L1</span> <span class="id">L2</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6714')">Proof.</div>
<div class="proofscript" id="proof6714">
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">GENMT.mixed_to_backward_simulation</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">mixed_to_generalized_mixed_simulation</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
